/* ============== Theme ============== */
:root{
  --bg-0: #020409;
  --bg-grad: radial-gradient(1200px 1200px at 20% 120%, #0a0d12 0, #04070e 55%, #000 100%);
  --glass: rgba(20,22,28,.38);
  --glass-strong: rgba(20,22,28,.55);
  --glass-brd: rgba(255,255,255,.22);
  --text: #eef3ff;
  --muted: #b9c6d9;
  --accent: #8fd3ff;
  --accent-2: #56a4ff;
  --danger: #ff6b6b;
  --shadow: 0 24px 60px rgba(0,0,0,.55);
  --inner: inset 0 1px 0 rgba(255,255,255,.08);
}

/* Page + canvas */
html,body{height:100%;margin:0;overflow:hidden;background:var(--bg-grad);color:var(--text)}
#canvas{display:block;width:100vw;height:100vh}

/* ============== Toolbar ============== */
#toolbar{
  position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
  display:flex; gap:10px; align-items:center; padding:10px;
  background:var(--glass); border:1px solid var(--glass-brd); border-radius:16px;
  backdrop-filter: blur(12px) saturate(1.25);
  box-shadow: var(--shadow), var(--inner);
  z-index:20; opacity:.05; transition:opacity .18s ease;
}
#toolbar:hover, #toolbar:focus-within{opacity:1}

/* Buttons (entire surface clickable) */
.tool-btn{
  min-width:40px; height:40px; padding:0 12px;
  display:grid; place-items:center; gap:8px;
  border-radius:12px; border:1px solid var(--glass-brd);
  background:rgba(255,255,255,.10); color:#fff; cursor:pointer;
  box-shadow: inset 0 0 0 0 transparent;
  user-select:none; -webkit-user-select:none;
  transition:background .12s, transform .06s, box-shadow .12s;
}
.tool-btn:hover{ background:rgba(255,255,255,.16); }
.tool-btn:active{ transform:translateY(1px); }
.tool-btn.active{ outline:1px solid var(--accent); box-shadow:0 0 0 3px rgba(143,211,255,.16); }
.tool-btn:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }

/* Optional icon slot if you inject SVGs */
.tool-btn > svg{ width:20px; height:20px; pointer-events:none; }

/* ============== Glass Cards / Panels / Menus ============== */
.glass{
  background:var(--glass); border:1px solid var(--glass-brd);
  border-radius:14px; backdrop-filter: blur(12px) saturate(1.2);
  box-shadow: var(--shadow), var(--inner);
}

/* Generic dropdown / pop menu */
.menu{
  position:fixed; inset:auto auto 72px 16px; min-width:260px; padding:10px;
  display:none; z-index:30; color:var(--text);
}
.menu.show{ display:block; animation:menu-pop .12s ease-out; }
@keyframes menu-pop{ from{transform:translateY(6px);opacity:0} to{transform:none;opacity:1} }

.menu .menu-item{
  display:flex; align-items:center; gap:10px;
  padding:8px 10px; border-radius:10px; cursor:pointer; font:13px/1.25 system-ui,Segoe UI,Roboto,sans-serif;
}
.menu .menu-item:hover{ background:rgba(255,255,255,.14); }
.menu .menu-item.active{ background:rgba(143,211,255,.20); outline:1px solid rgba(143,211,255,.35); }
.menu .dot{ width:8px; height:8px; border-radius:50%; background:currentColor; opacity:.9; }

/* Rows + form controls inside menus */
.row{ display:flex; align-items:center; gap:10px; padding:6px 8px; }
.row label{ width:92px; font:12px/1.1 system-ui,Segoe UI,Roboto,sans-serif; color:var(--muted); }

/* High-contrast selects and inputs */
select, input[type="number"], input[type="text"]{
  appearance:none; -webkit-appearance:none;
  width:100%; padding:8px 12px; border-radius:10px;
  background:linear-gradient(180deg,#0c1118,#0a0f16); color:#fff;
  border:1px solid var(--glass-brd);
}
select:focus, input:focus{ outline:1.5px solid var(--accent); }

/* Action buttons */
.actions{ display:flex; justify-content:flex-end; gap:8px; padding:8px; }
.btn-ghost{ background:transparent; border:1px solid var(--glass-brd); color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; }
.btn-primary{
  background:linear-gradient(180deg, var(--accent), var(--accent-2));
  color:#00121f; border:0; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600;
}
.btn-ghost:hover{ background:rgba(255,255,255,.08); }
.btn-primary:hover{ filter:brightness(1.05); }

/* Export menu grid */
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:8px; padding:6px; }
.grid .full{ grid-column:1/-1; }
.small{ font:12px/1 ui-monospace,Menlo,monospace; color:var(--muted); }

/* ============== Welcome Card ============== */
#welcome{
  position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  max-width:min(560px,90vw); padding:16px 18px; z-index:25;
}
#welcome.hidden{ display:none; }
#welcome h2{ margin:4px 0 10px; font:600 18px/1.2 system-ui,Segoe UI,Roboto,sans-serif; letter-spacing:.2px; }
#welcome p{ margin:0 0 12px; font:14px/1.45 system-ui,Segoe UI,Roboto,sans-serif; color:#dfe8f6; }
#welcome button{
  border:0; border-radius:12px; padding:10px 14px; cursor:pointer;
  background:linear-gradient(180deg, var(--accent), var(--accent-2)); color:#00121f; font-weight:600;
}

/* ============== Tooltips (hover labels) ============== */
.tooltip{
  position:fixed; padding:6px 9px; border-radius:10px;
  background:var(--glass-strong); border:1px solid var(--glass-brd);
  color:#fff; font:12px/1.2 system-ui,Segoe UI,Roboto,sans-serif;
  backdrop-filter: blur(10px); box-shadow: var(--shadow);
  pointer-events:none; opacity:0; transform:translateY(4px); transition:opacity .12s, transform .12s;
}
.tooltip.show{ opacity:1; transform:none; }

/* ============== Settings Panel ============== */
#settingsPanel{ /* if you mount one via JS, reuse these styles */
  position:fixed; top:96px; left:96px; width:360px; padding:10px 12px; z-index:40;
}
#settingsDrag{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:8px 6px 10px; cursor:grab; }
#settingsDrag:active{ cursor:grabbing; }
#settingsTitle{ font:12px/1.1 ui-monospace,Menlo,monospace; color:var(--muted); letter-spacing:.3px; }
#settingsClose{
  width:26px; height:26px; border-radius:8px;
  border:1px solid var(--glass-brd); background:rgba(255,255,255,.10);
  color:#fff; display:grid; place-items:center; cursor:pointer;
}
#settingsClose:hover{ background:rgba(255,255,255,.16); }

#settingsGrid{ display:grid; grid-template-columns:1fr auto; gap:8px 10px; padding:6px 4px 4px; }
#settingsGrid label{ font:12px/1.1 system-ui; color:var(--muted); }
#settingsGrid .val{ width:48px; text-align:right; font:12px/1 ui-monospace,Menlo; color:#d7e3f9; }

/* Sliders */
input[type="range"]{
  -webkit-appearance:none; appearance:none; width:220px; height:4px;
  background:linear-gradient(90deg,#0e1420,#0b111c); border-radius:999px; outline:none;
  border:1px solid rgba(255,255,255,.08);
}
input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none; width:16px; height:16px; border-radius:50%;
  background:linear-gradient(180deg,#fff,#bcdcff); border:1px solid rgba(0,0,0,.25); box-shadow:0 2px 6px rgba(0,0,0,.4);
}
input[type="range"]::-moz-range-thumb{
  width:16px; height:16px; border-radius:50%; background:#fff; border:1px solid rgba(0,0,0,.25);
}

/* ============== Overlays ============== */
#overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; z-index:35;
}
#overlay.show{ display:block; }

/* ============== Color Picker (wheel + diamond) ============== */
.color-pop{
  position:fixed; inset:auto auto 72px 16px; padding:12px; z-index:32; display:none;
}
.color-pop.show{ display:block; animation:menu-pop .12s ease-out; }
.wheel-wrap{ display:flex; flex-direction:column; align-items:center; gap:10px; }
#colorWheel, #svDiamond{ display:block; }
#hexField{
  width:120px; text-align:center;
  border-radius:10px; border:1px solid var(--glass-brd);
  background:#0c1018; color:#fff; padding:6px 8px; font:13px/1.2 ui-monospace,Menlo,monospace;
}

/* ============== New / Export headers ============== */
.menu h4{
  margin:6px 8px 4px;
  font:12px/1.1 ui-monospace,Menlo,monospace;
  color:var(--muted); letter-spacing:.3px;
}

/* ============== Responsive tweaks ============== */
@media (max-width: 720px){
  #toolbar{ gap:8px; padding:8px; }
  .tool-btn{ min-width:36px; height:36px; }
  .menu{ min-width:240px; inset:auto auto 64px 8px; }
}

/* Accessibility helpers */
:focus-visible{ outline:2px solid var(--accent); outline-offset:3px; }
