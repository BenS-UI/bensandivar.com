/* Filename: smart-section.css */
/* Scope: .pi-*  |  Theme bridge (inherits page bg) */
.pi-section{
  --surface:var(--color-body-bg,#0b0f1a);
  --bg:var(--color-body-bg,transparent);
  --text:var(--color-text,#dbe3f3);
  --muted:color-mix(in oklch,var(--text),#000 85%);
  --accent:var(--color-accent,#2f84ff);
  --accent-2:var(--color-primary,#ffffff);
  --radius:var(--radius,16px);
  --x:50%;
  --y:30%;
  position:relative; isolation:isolate; padding:10vh 8vw; color:var(--text);
}
.pi-wrap{position:relative; width:min(1100px,92vw); margin:auto; text-align:center}

/* Background grid layer (spotlight affects this only) */
.pi-gridlayer{position:absolute; inset:0; pointer-events:none; z-index:0}
.pi-gridlayer::before{
  content:""; position:absolute; inset:0; opacity:.55;
  background:
    repeating-linear-gradient(90deg, color-mix(in oklch,var(--muted),transparent) 0 1px, transparent 1px 36px),
    repeating-linear-gradient(0deg,  color-mix(in oklch,var(--muted),transparent) 0 1px, transparent 1px 36px);
  -webkit-mask:
    radial-gradient(260px circle at var(--x) var(--y), #000 0 70%, transparent 72%),
    radial-gradient(180% 140% at 50% 50%, #000, transparent 70%); /* soft vignette fade */
          mask:
    radial-gradient(260px circle at var(--x) var(--y), #000 0 70%, transparent 72%),
    radial-gradient(180% 140% at 50% 50%, #000, transparent 70%);
  -webkit-mask-composite: source-in;
          mask-composite: intersect;
}
@supports not (mask:radial-gradient(50% 50%)){ .pi-gridlayer::before{opacity:.14;-webkit-mask:none;mask:none}}

/* Header */
.pi-eyebrow{font:600 .8rem/1 var(--font-heading,inherit); letter-spacing:.08em; text-transform:uppercase; color:color-mix(in oklch,var(--text),#000 40%); margin-bottom:.5rem}
.pi-title{font:900 clamp(1.6rem,3.2vw,2.6rem)/1.2 var(--font-heading,inherit); margin:.25rem 0 .5rem; color:var(--accent-2)}
.pi-lede{max-width:60ch; margin:0 auto 1.6rem; color:var(--text); opacity:.9}

/* Thinking Micro-Copy */
.pi-rotator{display:inline-grid; height:1em; overflow:hidden; vertical-align:baseline}
.pi-rotator-inner{display:grid; grid-auto-rows:1em; animation:pi-rotate 9s steps(4,end) infinite}
.pi-rotator-inner > span{display:block}
@keyframes pi-rotate{0%,20%{transform:translateY(0)}25%,45%{transform:translateY(-1em)}50%,70%{transform:translateY(-2em)}75%,95%{transform:translateY(-3em)}}
@media (prefers-reduced-motion:reduce){ .pi-rotator-inner{animation:none} }

/* Grid of cards */
.pi-grid{position:relative; z-index:1; display:grid; gap:1rem; grid-template-columns:1fr; margin:1.5rem auto 0; width:min(900px,100%)}
@media (min-width:720px){ .pi-grid{grid-template-columns:repeat(3,1fr)}}

/* Edge-aware cards */
.pi-card{
  position:relative; border-radius:var(--radius); padding:1.1rem; text-align:left;
  background:linear-gradient(180deg,color-mix(in oklch,var(--surface),#fff 6%),color-mix(in oklch,var(--surface),#000 4%));
  border:1px solid color-mix(in oklch,var(--text),#000 85%); box-shadow:0 10px 26px color-mix(in oklch,#000,transparent 70%);
  transition:transform .18s ease, box-shadow .25s ease, border-color .2s ease; overflow:hidden
}
.pi-card::after{
  content:""; position:absolute; inset:-1px; border-radius:inherit; pointer-events:none;
  background:radial-gradient(260px 260px at var(--x) var(--y), color-mix(in oklch,var(--accent),transparent 82%) 0, transparent 70%);
  mix-blend-mode:screen; opacity:.5;
}
.pi-card:hover{transform:translateY(-2px); box-shadow:0 14px 34px color-mix(in oklch,#000,transparent 65%)}
.pi-card:focus-within{outline:none; box-shadow:0 0 0 3px color-mix(in oklch,var(--accent),transparent 50%),0 18px 40px color-mix(in oklch,#000,transparent 60%)}

/* Icon with "ink-in" stroke */
.pi-icon{width:40px; height:40px; margin-bottom:.5rem}
.pi-icon path{stroke:var(--accent); stroke-width:1.8; fill:none; stroke-linecap:round; stroke-linejoin:round; vector-effect:non-scaling-stroke; stroke-dasharray:120; stroke-dashoffset:120; opacity:.9}
.pi-reveal.is-in .pi-icon path{animation:pi-ink .9s ease forwards}
@keyframes pi-ink{to{stroke-dashoffset:0}}
@media (prefers-reduced-motion:reduce){ .pi-reveal.is-in .pi-icon path{animation:none; stroke-dashoffset:0}}

/* Text inside cards */
.pi-card h3{margin:.15rem 0 .25rem; font:700 1.05rem/1.2 var(--font-heading,inherit); color:var(--accent-2)}
.pi-card p{margin:0; color:color-mix(in oklch,var(--text),#000 20%); line-height:1.5}
.pi-card a{color:var(--accent); text-decoration:none; border-bottom:1px dashed transparent; transition:color .2s ease,border-color .2s ease}
.pi-card a:hover{color:var(--accent-2); border-color:currentColor}

/* Concealed detail area */
.pi-detail{margin-top:.35rem; min-height:1.4em; content-visibility:hidden}
.pi-detail[aria-hidden="true"]{display:block}
.pi-revealed .pi-detail{content-visibility:auto}

/* Hold-to-reveal button (fallback & progress) */
.pi-hold{
  --p:0%;
  position:relative; display:inline-grid; place-items:center; margin-top:.6rem; padding:.55rem .8rem; gap:.4rem; border-radius:999px;
  border:1px dashed color-mix(in oklch,var(--text),#000 78%); background:color-mix(in oklch,var(--surface),#fff 5%); color:var(--text);
  font:600 .85rem/1 var(--font-heading,inherit); cursor:pointer; transition:transform .12s ease, border-color .2s ease
}
.pi-hold:hover{transform:translateY(-1px); border-color:color-mix(in oklch,var(--accent),transparent 35%)}
.pi-hold:focus{outline:none; box-shadow:0 0 0 3px color-mix(in oklch,var(--accent),transparent 55%)}
.pi-ring{
  width:18px; height:18px; border-radius:50%; pointer-events:none;
  background:
    conic-gradient(var(--accent) var(--p), color-mix(in oklch,var(--text),#000 80%) 0),
    radial-gradient(closest-side, var(--bg) 60%, transparent 62%);
}
@media (prefers-reduced-motion:reduce){ .pi-hold{transition:none}}

/* Reveal utility */
.pi-reveal{opacity:0; transform:translateY(8px); transition:opacity .35s ease, transform .35s ease}
.pi-reveal.is-in{opacity:1; transform:none}
@media (prefers-reduced-motion:reduce){ .pi-reveal{opacity:1; transform:none; transition:none}}

/* Responsive tweaks */
@media (max-width:480px){
  .pi-lede{font-size:1rem}
  .pi-card{padding:1rem}
}

/* Ensure strong readable contrast */
.pi-section, .pi-card p{filter:contrast(110%)}
